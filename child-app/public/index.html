<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¥— NutraKids - Child App</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- ============================================
        LOGIN SCREEN
    ============================================ -->
    <div id="loginScreen" class="screen active">
        <div class="login-container">
            <div class="logo">ğŸ¥—</div>
            <h1>NutraKids</h1>
            <p>Your Healthy Eating Companion!</p>
            
            <form id="loginForm">
                <div class="form-group">
                    <label for="loginEmail">Email</label>
                    <input type="email" id="loginEmail" placeholder="your.email@example.com" required>
                </div>
                
                <div class="form-group">
                    <label for="loginPassword">Password</label>
                    <input type="password" id="loginPassword" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢" required>
                </div>
                
                <div id="loginError" class="error-message"></div>
                
                <button type="submit" class="btn btn-primary btn-large">Login</button>
            </form>
        </div>
    </div>

    <!-- ============================================
        CHILD DASHBOARD
    ============================================ -->
    <div id="childDashboard" class="screen">
        <div class="dashboard-header">
            <h1>ğŸ‘‹ Hi, <span id="childNameDisplay">Friend</span>!</h1>
            <button class="btn-logout" id="childLogoutBtn">Logout</button>
        </div>

        <!-- POINTS SECTION -->
        <div class="points-section">
            <div class="points-display">
                <div class="points-total">
                    <div class="points-value" id="totalPointsDisplay">0</div>
                    <div class="points-label">Total Points</div>
                </div>
                <div class="points-divider"></div>
                <div class="points-today">
                    <div class="points-value" id="todayPointsDisplay">0</div>
                    <div class="points-label">Today</div>
                </div>
            </div>
        </div>

        <!-- TODAY'S SUMMARY -->
        <div class="summary-section">
            <h2>ğŸŒŸ Today's Summary</h2>
            <div class="summary-grid">
                <div class="summary-card">
                    <div class="summary-icon">ğŸ½ï¸</div>
                    <div class="summary-value" id="mealsLoggedCount">0</div>
                    <div class="summary-label">Meals</div>
                </div>
                <div class="summary-card">
                    <div class="summary-icon">ğŸ’§</div>
                    <div class="summary-value"><span id="waterLoggedCount">0</span>/8</div>
                    <div class="summary-label">Water (cups)</div>
                </div>
                <div class="summary-card">
                    <div class="summary-icon">â­</div>
                    <div class="summary-value" id="avgRatingDisplay">-</div>
                    <div class="summary-label">Avg Rating</div>
                </div>
            </div>
        </div>

        <!-- ACTION BUTTONS -->
        <div class="actions-section">
            <h3>What would you like to do?</h3>
            <div class="actions-grid">
                <button onclick="showScreen('mealLoggingScreen')" class="action-card">
                    <div class="action-icon">ğŸ½ï¸</div>
                    <div class="action-name">Log a Meal</div>
                </button>
                
                <button onclick="openWaterLogger()" class="action-card">
                    <div class="action-icon">ğŸ’§</div>
                    <div class="action-name">Log Water</div>
                </button>
                
                <button onclick="showScreen('todayStatsScreen')" class="action-card">
                    <div class="action-icon">ğŸ“Š</div>
                    <div class="action-name">Today's Stats</div>
                </button>
                
                <button onclick="showScreen('achievementsScreen')" class="action-card">
                    <div class="action-icon">ğŸ†</div>
                    <div class="action-name">Achievements</div>
                </button>
                
                <button onclick="showScreen('foodPreferencesScreen')" class="action-card">
                    <div class="action-icon">â¤ï¸</div>
                    <div class="action-name">My Favorites</div>
                </button>
                
                <button onclick="showAboutApp()" class="action-card">
                    <div class="action-icon">â„¹ï¸</div>
                    <div class="action-name">About</div>
                </button>
            </div>
        </div>

        <!-- TODAY'S MEALS BREAKDOWN -->
        <div class="meals-breakdown-section">
            <h3>ğŸ“ Today's Foods</h3>
            <div id="todayMealsBreakdown" class="meals-list">
                <p class="empty-state">No foods logged yet. Start logging!</p>
            </div>
        </div>
    </div>

    <!-- ============================================
        MEAL LOGGING SCREEN
    ============================================ -->
    <div id="mealLoggingScreen" class="screen">
        <div class="screen-header">
            <h2>ğŸ½ï¸ Log a Food</h2>
            <button class="btn btn-back" onclick="showScreen('childDashboard')">â† Back</button>
        </div>

        <div class="screen-content">
            <!-- Meal Type Selection -->
            <div class="form-group">
                <label>Add to which meal?</label>
                <div class="meal-type-selector">
                    <button class="meal-type-btn" data-type="breakfast" onclick="selectMealType('breakfast')">ğŸŒ… Breakfast</button>
                    <button class="meal-type-btn" data-type="lunch" onclick="selectMealType('lunch')">ğŸŒ Lunch</button>
                    <button class="meal-type-btn" data-type="dinner" onclick="selectMealType('dinner')">ğŸŒ™ Dinner</button>
                    <button class="meal-type-btn" data-type="snack" onclick="selectMealType('snack')">ğŸ¿ Snack</button>
                </div>
            </div>

            <input type="hidden" id="selectedMealType" value="breakfast">

            <!-- Food Search -->
            <div class="form-group">
                <label>What did you eat?</label>
                <input 
                    type="text" 
                    id="foodSearch" 
                    placeholder="Search: apple, bread, eggs..."
                    autocomplete="off"
                />
                <div id="foodSearchResults" class="search-results"></div>
            </div>

            <!-- Selected Food Display -->
            <div id="selectedFoodDisplay" class="selected-food hidden">
                <div class="selected-food-name" id="selectedFoodName"></div>
                <button onclick="clearFoodSelection()" class="btn-small">âœ• Change</button>
            </div>

            <!-- Rating System -->
            <div class="form-group" id="ratingSection" style="display: none;">
                <label>How good was it?</label>
                <div class="rating-buttons">
                    <button class="rating-btn" data-rating="1" onclick="setRating(1)">ğŸ˜¢<br><small>Not good</small></button>
                    <button class="rating-btn" data-rating="2" onclick="setRating(2)">ğŸ˜<br><small>OK</small></button>
                    <button class="rating-btn" data-rating="3" onclick="setRating(3)">ğŸ™‚<br><small>Good</small></button>
                    <button class="rating-btn" data-rating="4" onclick="setRating(4)">ğŸ˜Š<br><small>Really good</small></button>
                    <button class="rating-btn" data-rating="5" onclick="setRating(5)">ğŸ˜<br><small>Amazing!</small></button>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="button-group" id="actionButtons" style="display: none;">
                <button onclick="handleLogFood()" class="btn btn-primary btn-large">âœ“ Add Food</button>
            </div>

            <!-- Foods Added Today -->
            <div id="foodsAddedSection" style="display: none;">
                <h3>Foods added:</h3>
                <div id="foodsAddedList" class="foods-added-list"></div>
                <div class="button-group">
                    <button onclick="handleContinueAdding()" class="btn btn-secondary">+ Add Another</button>
                    <button onclick="showScreen('childDashboard')" class="btn btn-primary">Done! ğŸ‰</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ============================================
        WATER LOGGING MODAL
    ============================================ -->
    <div id="waterLoggerModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ’§ Log Water</h2>
                <button class="btn-close" onclick="closeWaterLogger()">âœ•</button>
            </div>

            <div class="modal-body">
                <div class="water-display">
                    <div id="waterProgressBar" class="water-progress">
                        <div id="waterFilled" class="water-filled"></div>
                    </div>
                    <div class="water-stats">
                        <div class="water-current"><span id="waterCurrentCount">0</span> cups</div>
                        <div class="water-goal">Goal: 8 cups</div>
                    </div>
                </div>

                <div class="water-buttons">
                    <button onclick="addWater(1)" class="btn btn-water">+1 Cup</button>
                    <button onclick="addWater(2)" class="btn btn-water">+2 Cups</button>
                    <button onclick="addWater(3)" class="btn btn-water">+3 Cups</button>
                </div>

                <div id="waterMessage" class="water-message"></div>

                <button onclick="closeWaterLogger()" class="btn btn-primary btn-large">Done</button>
            </div>
        </div>
    </div>

    <!-- ============================================
        TODAY'S STATS SCREEN
    ============================================ -->
    <div id="todayStatsScreen" class="screen">
        <div class="screen-header">
            <h2>ğŸ“Š Today's Stats</h2>
            <button class="btn btn-back" onclick="showScreen('childDashboard')">â† Back</button>
        </div>

        <div class="screen-content">
            <div id="todayStatsDetail"></div>
        </div>
    </div>

    <!-- ============================================
        ACHIEVEMENTS SCREEN
    ============================================ -->
    <div id="achievementsScreen" class="screen">
        <div class="screen-header">
            <h2>ğŸ† Achievements</h2>
            <button class="btn btn-back" onclick="showScreen('childDashboard')">â† Back</button>
        </div>

        <div class="screen-content">
            <div id="achievementsList" class="achievements-grid"></div>
        </div>
    </div>

    <!-- ============================================
        FOOD PREFERENCES SCREEN
    ============================================ -->
    <div id="foodPreferencesScreen" class="screen">
        <div class="screen-header">
            <h2>â¤ï¸ My Favorites</h2>
            <button class="btn btn-back" onclick="showScreen('childDashboard')">â† Back</button>
        </div>

        <div class="screen-content">
            <div id="preferencesGrid" class="preferences-grid"></div>
        </div>
    </div>

    <!-- ============================================
        SUCCESS MODAL
    ============================================ -->
    <div id="successModal" class="modal hidden">
        <div class="modal-content modal-success">
            <div class="success-animation">ğŸ‰</div>
            <h2 id="successMessage">Success!</h2>
            <p id="successDetails"></p>
            <button onclick="closeSuccessModal()" class="btn btn-primary btn-large">Continue ğŸŒŸ</button>
        </div>
    </div>

    <script src="js/app.js"></script>
</body>
</html>
